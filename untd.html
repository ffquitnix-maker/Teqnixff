<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Shop Teqnix Diamonds</title>
  <style>
    body { font-family: Tahoma; text-align: center; background:#f4f4f4; }
    .card { background:#fff; width:320px; margin:20px auto; padding:20px;
            border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.2);}
    button { padding:10px 18px; border:none; border-radius:8px;
             background:#28a745; color:#fff; cursor:pointer; margin:5px 0;}
    button:disabled{ background:#ccc; cursor:not-allowed; }
    input{ padding:8px; border:1px solid #ccc; border-radius:6px; margin:5px; width:80%;}
    hr{ margin:20px 0;}
  </style>
</head>
<body>

  <div class="card">
    <h2>Ù…Ø±Ø­Ø¨Ø§ ÙÙŠ Shop Teqnix Diamonds ğŸ’</h2>
    <p>Ø¥ÙƒÙ…Ù„ Ø§Ù„Ù…Ù‡Ø§Ù… ÙˆØ§Ø±Ø¨Ø­ Ù†Ù‚Ø§Ø·!</p>
    <p>Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©: <span id="points">0</span></p>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø¹Ø±ÙˆØ¶ -->
    <button onclick="completeOffer()">Ø¥ÙƒÙ…Ù„ Ø¹Ø±Ø¶ ğŸ”¥</button>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø± -->
    <button id="redeemBtn" onclick="redeem()" disabled>
      Ø¥Ø´ØªØ±Ù 100 Diamonds (4 Ù†Ù‚Ø§Ø·)
    </button>

    <!-- Ø¥Ø¯Ø®Ø§Ù„ ID -->
    <div id="idBox" style="display:none; margin-top:10px;">
      <p>Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ ID Ù…ØªØ§Ø¹Ùƒ:</p>
      <input type="text" id="ffid" placeholder="ID Free Fire">
      <button onclick="submitID()">ØªØ£ÙƒÙŠØ¯</button>
    </div>

    <!-- Referral -->
    <hr>
    <p>Ø´Ø§Ø±Ùƒ Ù…Ø¹ ØµØ­Ø§Ø¨Ùƒ ÙˆØ§Ø±Ø¨Ø­ Ù†Ù‚Ø·Ø© ğŸ</p>
    <input type="text" id="refLink" readonly>
    <button onclick="copyLink()">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·</button>
  </div>

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    emailjs.init("YOUR_EMAILJS_USERID"); // Ø¶Ø¹ Ù‡Ù†Ø§ User ID Ù…ØªØ§Ø¹ EmailJS

    let points = 0;
    const pointsSpan = document.getElementById("points");
    const redeemBtn = document.getElementById("redeemBtn");
    const refLink = document.getElementById("refLink");

    // ØªÙˆÙ„ÙŠØ¯ Ù„ÙŠÙ†Ùƒ referral
    const userID = Math.floor(Math.random()*100000);
    refLink.value = window.location.origin + "?ref=" + userID;

    function completeOffer(){
      points++;
      pointsSpan.innerText = points;
      if(points >= 4){ redeemBtn.disabled = false; }
    }

    function redeem(){
      document.getElementById("idBox").style.display = "block";
    }

    function submitID(){
      const ffid = document.getElementById("ffid").value;
      if(ffid){
        alert("Ù…Ø¨Ø±ÙˆÙƒ ğŸ‰! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ 100 Diamonds Ù„Ø­Ø³Ø§Ø¨ ID: " + ffid);
        sendEmail(ffid); // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
        points -= 4;
        pointsSpan.innerText = points;
        redeemBtn.disabled = true;
        document.getElementById("idBox").style.display = "none";
      }else{
        alert("Ø±Ø¬Ø§Ø¡ Ø§ÙƒØªØ¨ ID ØµØ­ÙŠØ­!");
      }
    }

    function copyLink(){
      refLink.select();
      document.execCommand("copy");
      alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·! Ø§Ø¨Ø¹Ø«Ùˆ Ù„ØµØ­Ø§Ø¨Ùƒ ÙˆØ§Ø±Ø¨Ø­ Ù†Ù‚Ø§Ø·");
    }

    function sendEmail(ffid){
      const templateParams = {
        ffid: ffid,
        diamonds: "100 Diamonds",
        points: 4
      };
      emailjs.send('YOUR_SERVICE_ID','YOUR_TEMPLATE_ID', templateParams)
      .then(function(response) {
         console.log('SUCCESS!', response.status, response.text);
      }, function(error) {
         console.log('FAILED...', error);
      });
    }
  </script>
</body>
</html>